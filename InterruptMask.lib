https://os.mbed.com/users/nleoni/code/InterruptMask/#a34eddd0a2be
